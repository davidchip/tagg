<html>

<head>
    <script src="../tagg.js" data-autoload="false"></script>
</head>

<body>
    <plum-fruit definition size="5">
        <style>
            plum-fruit {
                border-radius:50%;
                background-color:purple;
                height:30px; width:30px;
                position:absolute;
                -webkit-transition: all 1s ease-in-out;
            }
        </style>

        <this-script>
            this.update = function(frame) {
                if (frame % 50 == 0) {
                    this.style.top = Math.random() * 100 + "%";
                    this.style.left = Math.random() * 100 + "%";
                }
            }

            this.changed = function(name, oldVal, newVal){
                switch (name) {
                    case "size":
                        this.style.width = newVal + "px";
                        this.style.height = newVal + "px";
                }
            }
        </this-script>
    </plum-fruit>

    <script>
        tagg.testEvents([
            ["plum-fruit", "tag-attached", 2]
        ]).then(function() {
            first = t.id("first");
            second = t.id("second");
            tree = t.id("tree");

            tagg.testEqual(tagg.updates.length, 4, "proper number of items to update")
        });
    </script>

    <fps-meter></fps-meter>

    <div id="tree">
        <plum-fruit id="first"></plum-fruit>
        <plum-fruit id="second" size="10"></plum-fruit>
    </div>
</body>
</html>
