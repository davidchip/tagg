<html>

<head>
    <script src="../../dist/tagg.js" data-remote="false"></script>
</head>

<body>

    <script>
        tagg.loaded.then(function(){
            tagg.define("plum-fruit", {
                size: 10,
                update: function (frame) {
                    if(frame % 60 == 0) {
                        this.style.top = Math.random() * 100 + "%";    
                        this.style.left = Math.random() * 100 + "%";
                    }
                }
            });    
        });

        tagg.testEvents([
            ["plum-tree", "def-accepted", 1],
            ["plum-fruit", "def-accepted", 1],
            ["plum-fruit", "tag-attached", 10],
            ["plum-tree", "file-def-load-succeeded", 1],
            ["tagbank", "pushed-bank", 2]
        ], 3000).then(function() {
            tree = t.id("tree");
            tree.fruits = 5;

            tagg.testEvents([
                ["plum-tree", "prop-changed", 2],
                ["plum-fruit", "tag-removed", 5]
            ], 3000).then(function() {
                tree.fruits = 100;

                setTimeout(function(){
                    tagg.testEqual(tagg.updates.length, 103, "proper number of tags to update")
                }, 3000)
                
            });
        });
    </script>

    <fps-meter></fps-meter>

    <plum-tree fruits="10" id="tree">
        <plum-fruit size="15"></plum-fruit>
        <div></div>
        <h1></h1>
    </plum-tree>
</body>
</html>
