<html>

<head>
    <script src="/tag.js"></script>
</head>

<body>
    <script>
        tag.banks = []
        tag.banks.push(new tag.FileBank({
            dir: "tests"
        }))

        tag.define("definition-script", {
            mutateParentDefinition: function (def) {
                func = new Function(this.textContent)
                func.call(def)
                return def
            }
        })
    </script>

    <script>
        tag.assertEvents([
            ["plum-tree", "def-accepted", 1],
            ["plum-fruit", "tag-attached", 50],
            ["plum-fruit", "prop-changed", 50],
            ["plum-tree", "static-def-load-succeeded", 1],
            ["plum-fruit", "static-def-load-succeeded", 1]
        ]).then(function() {
            t.id("tree").fruits = 10

            tag.assertEvents([
                ["plum-fruit", "tag-removed", 40]
            ])
        });
    </script>

    <plum-tree fruits="50" id="tree">
        <plum-fruit size="15"></plum-fruit>
        <div></div>
        <h1></h1>
    </plum-tre>
</body>
</html>
